#include "stdio.h"#include "sys/types.h"#include "sys/socket.h"#include "netinet/in.h"#include "string.h"#include "stdlib.h"#include <fcntl.h>#define max 2000struct sockaddr_in clientaddr;socklen_t clientlen;int len,listenfd,connfd,i=0,r,co,port;char buff[1000],c,buff1[max];char ed[5]="exit";void create(){listenfd=socket(AF_INET,SOCK_STREAM,0);if(listenfd==-1){perror("socket");exit(-1);}memset(clientaddr.sin_zero,'\0',sizeof(clientaddr.sin_zero));printf("\n\tCLIENT\n");printf("\n Enter the port no:");scanf("%d",&port);getc(stdin);printf("\n Port No is : %d",port);clientaddr.sin_family=AF_INET;clientaddr.sin_addr.s_addr=htons(INADDR_ANY);clientaddr.sin_port=htons(port);}int selectService(){   int id=1;         printf("\n1.get file content\n2. reverse string\n3. executable");     printf("\nenter the service id:");     scanf("%d",&id);     getc(stdin);     //sendto(listenfd,&id,1,0,(struct sockaddr*)&clientaddr,sizeof(clientaddr));     //connect(listenfd,());    if (connect(listenfd, (struct sockaddr *)&clientaddr,sizeof(struct sockaddr)) == -1) {perror("connect");exit(1);}     send(listenfd,&id,1, 0);   return id;}void getFileContents(){  while(1)  {	printf("\n Enter file name:");	fgets(buff, sizeof(buff), stdin);	buff[strlen(buff)-1]='\0';		//sendto(listenfd,buff,sizeof(buff),0,(struct sockaddr*)&clientaddr,sizeof(clientaddr));        send(listenfd,buff,sizeof(buff), 0);	if(strcmp(buff,ed)==0)	{	break;	}	//r=recvfrom(listenfd,buff,sizeof(buff),0,(struct sockaddr*)&clientaddr, &clientlen);          r=recv(listenfd,buff,sizeof(buff),0);	printf("\n From Server:%s",buff);	strcpy(buff,"\0");	   }}void reverseString(){        printf("\n Enter the string:");	fgets(buff, sizeof(buff), stdin);	buff[strlen(buff)-1]='\0';		//sendto(listenfd,buff,sizeof(buff),0,(struct sockaddr*)&clientaddr,sizeof(clientaddr));          send(listenfd,buff,sizeof(buff), 0);	/*if(strcmp(buff,ed)==0)	{	break;	}*/	//r=recvfrom(listenfd,buff,sizeof(buff),0,(struct sockaddr*)&clientaddr, &clientlen);        recv(listenfd,buff,sizeof(buff), 0);	printf("\n From Server:%s\n",buff);}void executable(){   int fp=open("script",O_RDWR|O_CREAT,0777),i=0;   char buff[1024]={"gcc hello.c -o hello1.out"};    while(buff[i]!='\0')  {   write(fp,&buff[i++],1);  }   close(fp);   system("./script");   fp=open("hello1.out",O_RDONLY,0777);   if(fp==-1)   {    printf("error");    exit(-1);   }     char ch;    while( (read(fp,&ch,1)!=0) )       {	write(listenfd,&ch,1);      }   close(fp);	printf("bye bye\n");   //send(listenfd,buff,sizeof(buff),0);    //sleep(10000);   //recv(listenfd,buff1,sizeof(buff1),0);   printf("\nwhat%s",buff1);     fflush(stdout);    }int main(){  create();int id=selectService(); if(id==1)   getFileContents(); if(id==2)   reverseString(); if(id==3)    executable();close(listenfd);exit(0);return 0;}